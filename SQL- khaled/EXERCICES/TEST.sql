DROP DATABASE IF EXISTS garage; 

CREATE DATABASE garage;  

USE garage; 

CREATE TABLE voiture ( 
    voit_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
    voit_marque VARCHAR(50) NOT NULL, 
    voit_prix INT 
); 

INSERT INTO voiture (voit_id, voit_marque, voit_prix) VALUES (1, 'Audi', 29990); 
INSERT INTO voiture (voit_id, voit_marque, voit_prix) VALUES (2, 'BMW', 8500); 
INSERT INTO voiture (voit_id, voit_marque, voit_prix) VALUES (3, 'Ford', 15550); 


-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************

CREATE TABLE stagiaires(
        sta_id      Int NOT NULL ,
        sta_nom     Varchar (50) NOT NULL ,
        sta_prenom  Varchar (50) NOT NULL ,
        sta_adresse Varchar (50) NOT NULL ,
        sta_tel     Varchar (30) NOT NULL
    ,CONSTRAINT stagiaires_PK PRIMARY KEY (sta_id)
);

CREATE TABLE formations(
        form_code         Int NOT NULL ,
        form_duree_heures Int NOT NULL ,
        form_libelle      Varchar (50) NOT NULL ,
        form_description  Varchar (50) NOT NULL
    ,CONSTRAINT formations_PK PRIMARY KEY (form_code)
);

CREATE TABLE form_stagiaires(
        form_code Int NOT NULL ,
        sta_id    Int NOT NULL
    ,CONSTRAINT form_stagiaires_PK PRIMARY KEY (form_code,sta_id)
    ,CONSTRAINT form_stagiaires_formations_FK FOREIGN KEY (form_code) REFERENCES formations(form_code)
    ,CONSTRAINT form_stagiaires_stagiaires_FK FOREIGN KEY (sta_id) REFERENCES stagiaires(sta_id)
);
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
CREATE USER 'dave_loper'@'123.45.67.89' IDENTIFIED BY '1Ksable';
CREATE USER '%' IDENTIFIED BY '1Ksable';
DROP USER 'nom_utilisateur'@'adresse_ip';
GRANT ALL PRIVILEGES ON hotel.* TO 'dave_loper'@'%' 
IDENTIFIED BY '1Ksable';
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
LOAD DATA LOCAL INFILE 'C:\\Users\\_chemin_d_acces_au_fichier_\\vente.csv'
INTO TABLE vente
FIELDS TERMINATED BY ';' 
LINES TERMINATED BY '\r\n'
IGNORE 1 LINES
(NUMFOU,CODART,DELLIV,QTE1,PRIX1,QTE2,PRIX2,QTE3,PRIX3);
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
    SELECT * FROM EMPLOYES
    SELECT NOM, SALAIRE FROM EMPLOYES
SELECT CONCAT(NOM,' ',PRENOM),'SALAIRE :', SALAIRE * 100, 'CENTIMES '
FROM EMPLOYES

SELECT DISTINCT WDEPT FROM EMPLOYES
SELECT NOM,PRENOM FROM EMPLOYES
LIMIT 5;


SELECT * FROM EMPLOYES WHERE WDEPT = 41 OR WDEPT = '50'



SELECT NOM, SALAIRE, NOEMP FROM EMPLOYES
WHERE NOEMP > '19' AND SALAIRE = 13000


SELECT * FROM EMPLOYES
WHERE WDEPT IN (31, 42, 33, 44, 50)



SELECT * FROM EMPLOYES
WHERE NOEMP IN ('0001', '0002', '0003', '004', '00005')
-- ou
SELECT * FROM EMPLOYES
WHERE NOEMP BETWEEN 1 AND 5
-- ou
SELECT * FROM EMPLOYES
WHERE NOEMP >= 1 AND NOEMP <= 5



LIKE 'BAL%' tous les noms commençant par les lettres BAL

LIKE '%BAL%' tous les noms contenant les lettres BAL

LIKE '--LZ--' tous les noms de 6 caractères contenant LZ en 3ème et 4ème positions

LIKE ‘[S-V]ENT’ tous les noms de 4 lettres se terminant par les lettres ENT et commençant par n’importe quelle lettre comprise entre S et V.

NOT LIKE inverse de LIKE



SELECT AVG(SALAIRE) FROM EMPLOYES
-- ou
SELECT AVG(DISTINCT SALAIRE) FROM EMPLOYES




SELECT SUM(SALAIRE) FROM EMPLOYES
WHERE WDEPT = '45'


-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************


WHERE permet de sélectionner des lignes avant la formation des groupes. HAVING permet de ne retenir que certains des groupes constitués par la clause GROUP BY.

-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************
-- ***************************************************************************************************************************************************************************





